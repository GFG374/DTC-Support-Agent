<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DTC Admin Console (Next.js Design)</title>
    
    <!-- 1. æ ·å¼åº“ï¼šTailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 2. æ ¸å¿ƒåº“ï¼šReact å…¨å®¶æ¡¶ -->
    <script src="https://cdn.staticfile.net/react/18.2.0/umd/react.development.js"></script>
    <script src="https://cdn.staticfile.net/react-dom/18.2.0/umd/react-dom.development.js"></script>
    <script src="https://cdn.staticfile.net/babel-standalone/7.22.20/babel.min.js"></script>

    <style>
        body { background-color: #f3f4f6; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; height: 100vh; overflow: hidden; }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        /* æ¨¡æ‹Ÿ Next.js çš„åŠ è½½åŠ¨ç”» */
        .fade-in { animation: fadeIn 0.3s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<div id="root" class="h-full w-full">
    <div class="flex items-center justify-center h-full text-gray-400 text-sm">æ­£åœ¨åŠ è½½æ§åˆ¶å°èµ„æº...</div>
</div>

<script type="text/babel">
    const { useState, useEffect } = React;

    // ==========================================
    // ğŸ› ï¸ åŸºç¡€å›¾æ ‡ç»„ä»¶ (é˜²æ­¢æŠ¥é”™)
    // ==========================================
    const Icon = ({ path, size = 20, className = "" }) => (
        <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className} dangerouslySetInnerHTML={{ __html: path }} />
    );

    const Icons = {
        Inbox: <Icon path="<polyline points='22 12 16 12 14 15 10 15 8 12 2 12'/><path d='M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z'/>" />,
        CheckCircle: <Icon path="<path d='M22 11.08V12a10 10 0 1 1-5.93-9.14'/><polyline points='22 4 12 14.01 9 11.01'/>" />,
        AlertTriangle: <Icon path="<path d='M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z'/><line x1='12' y1='9' x2='12' y2='13'/><line x1='12' y1='17' x2='12.01' y2='17'/>" />,
        Zap: <Icon path="<polygon points='13 2 3 14 12 14 11 22 21 10 12 10 13 2'/>" />,
        User: <Icon path="<path d='M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2'/><circle cx='12' cy='7' r='4'/>" />,
        Search: <Icon path="<circle cx='11' cy='11' r='8'/><line x1='21' y1='21' x2='16.65' y2='16.65'/>" />,
        Monitor: <Icon path="<rect x='2' y='3' width='20' height='14' rx='2' ry='2'/><line x1='8' y1='21' x2='16' y2='21'/><line x1='12' y1='17' x2='12' y2='21'/>" />,
        Bot: <Icon path="<rect x='3' y='11' width='18' height='10' rx='2'/><circle cx='12' cy='5' r='2'/><path d='M12 7v4'/><line x1='8' y1='16' x2='8' y2='16'/><line x1='16' y1='16' x2='16' y2='16'/>" />,
        Send: <Icon path="<line x1='22' y1='2' x2='11' y2='13'/><polygon points='22 2 15 22 11 13 2 9 22 2'/>" />,
        X: <Icon path="<line x1='18' y1='6' x2='6' y2='18'/><line x1='6' y1='6' x2='18' y2='18'/>" size={16}/>
    };

    // ==========================================
    // ğŸ§  æ•°æ®æ¨¡æ‹Ÿ (Mock Data)
    // ==========================================
    const CHAT_LIST = [
        { id: 1, user: "Sarah Jenkins", lastMsg: "æˆ‘æƒ³é€€æ‰è¿™ä»¶å¤§è¡£...", time: "2m", status: "ai_handling", risk: "low" },
        { id: 2, user: "Mike Ross", lastMsg: "è¿˜æ²¡å‘è´§å—ï¼Ÿéƒ½ä¸‰å¤©äº†", time: "15m", status: "needs_human", risk: "high" },
        { id: 3, user: "Jessica Wu", lastMsg: "è°¢è°¢ï¼Œå·²ç»æ”¶åˆ°é€€æ¬¾äº†", time: "1h", status: "closed", risk: "low" },
    ];

    const CHAT_HISTORY = [
        { role: "user", content: "ä½ å¥½ï¼Œæˆ‘åˆšæ”¶åˆ°è¿™ä»¶ç¾Šæ¯›å¤§è¡£ï¼Œä½†æ˜¯é¢œè‰²å’Œå›¾ç‰‡å·®åˆ«å¤ªå¤§äº†ã€‚" },
        { role: "ai", content: "éå¸¸æŠ±æ­‰ç»™æ‚¨å¸¦æ¥å›°æ‰°ã€‚æˆ‘ä»¬å°½é‡ä¿è¯å›¾ç‰‡è¿˜åŸï¼Œä½†å…‰çº¿ç¡®å®ä¼šæœ‰å½±å“ã€‚è¯·é—®æ‚¨æ˜¯æƒ³æ¢ä¸€ä¸ªé¢œè‰²ï¼Œè¿˜æ˜¯ç›´æ¥é€€è´§å‘¢ï¼Ÿ" },
        { role: "user", content: "æˆ‘ä¸æƒ³æ¢äº†ï¼Œç›´æ¥é€€å§ã€‚è¿™å¯æ˜¯ 899 å…ƒçš„ä¸œè¥¿ï¼Œå¤±æœ›ã€‚" },
        { role: "system", content: "âš ï¸ æ£€æµ‹åˆ°ç”¨æˆ·æƒ…ç»ªè´Ÿé¢ï¼Œä¸”é‡‘é¢ > $50ï¼Œå»ºè®®äººå·¥ä»‹å…¥ã€‚", type: "alert" }
    ];

    const APPROVAL_TASKS = [
        { id: 'T-1001', user: 'Mike Ross', item: 'é™é‡ç‰ˆçƒé‹ (Size 42)', amount: 1299, reason: 'ä¸å–œæ¬¢', riskScore: 85, platform: 'Alipay' },
        { id: 'T-1002', user: 'Sarah Jenkins', item: 'é«˜çº§ç¾Šç»’å¤§è¡£', amount: 899, reason: 'è‰²å·®é—®é¢˜', riskScore: 12, platform: 'WeChat' },
    ];

    // ==========================================
    // ğŸ§© æ¨¡å—ç»„ä»¶
    // ==========================================

    // 1. å·¦ä¾§å¯¼èˆª (Sidebar)
    const Sidebar = ({ activeTab, onTabChange }) => (
        <div className="w-[64px] bg-black h-full flex flex-col items-center py-6 gap-6 z-20 shadow-xl">
            <div className="w-8 h-8 bg-white rounded-lg flex items-center justify-center font-bold text-xs mb-4">AI</div>
            
            <button onClick={() => onTabChange('inbox')} className={`p-3 rounded-xl transition ${activeTab === 'inbox' ? 'bg-white/20 text-white' : 'text-gray-500 hover:text-white'}`} title="å¯¹è¯">
                {Icons.Inbox}
            </button>
            <button onClick={() => onTabChange('approvals')} className={`p-3 rounded-xl transition relative ${activeTab === 'approvals' ? 'bg-white/20 text-white' : 'text-gray-500 hover:text-white'}`} title="å®¡æ‰¹">
                {Icons.CheckCircle}
                <span className="absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full border-2 border-black"></span>
            </button>
            <div className="flex-1"></div>
            <div className="w-8 h-8 rounded-full bg-gradient-to-tr from-purple-500 to-blue-500"></div>
        </div>
    );

    // 2. å¯¹è¯åˆ—è¡¨ (Chat List Column)
    const ChatList = () => (
        <div className="w-[300px] bg-white border-r border-gray-200 flex flex-col h-full">
            <div className="p-4 border-b flex items-center justify-between">
                <h2 className="font-bold text-gray-800">Inbox</h2>
                <div className="bg-gray-100 p-2 rounded-lg text-gray-500">{Icons.Search}</div>
            </div>
            <div className="flex-1 overflow-y-auto">
                {CHAT_LIST.map(chat => (
                    <div key={chat.id} className={`p-4 border-b border-gray-50 hover:bg-gray-50 cursor-pointer ${chat.id === 2 ? 'bg-blue-50/50 border-l-4 border-l-blue-500' : ''}`}>
                        <div className="flex justify-between items-start mb-1">
                            <span className="font-bold text-sm text-gray-900">{chat.user}</span>
                            <span className="text-xs text-gray-400">{chat.time}</span>
                        </div>
                        <p className="text-xs text-gray-500 truncate mb-2">{chat.lastMsg}</p>
                        <div className="flex gap-2">
                            {chat.status === 'ai_handling' && <span className="text-[10px] bg-gray-100 text-gray-500 px-1.5 py-0.5 rounded border flex items-center gap-1">{Icons.Bot} AI æ¥ç®¡ä¸­</span>}
                            {chat.status === 'needs_human' && <span className="text-[10px] bg-yellow-100 text-yellow-700 px-1.5 py-0.5 rounded border border-yellow-200 flex items-center gap-1">âš ï¸ éœ€äººå·¥</span>}
                        </div>
                    </div>
                ))}
            </div>
        </div>
    );

    // 3. å¯¹è¯ä¸»çª—å£ (Main Chat)
    const ChatWindow = () => (
        <div className="flex-1 flex flex-col h-full bg-slate-50 relative">
            {/* Chat Header */}
            <div className="h-16 bg-white border-b px-6 flex items-center justify-between shadow-sm z-10">
                <div>
                    <h3 className="font-bold text-gray-800 flex items-center gap-2">
                        Mike Ross 
                        <span className="text-xs font-normal text-gray-400 border px-2 py-0.5 rounded">Order #ORD-7789</span>
                    </h3>
                </div>
                <div className="flex gap-3">
                    <button className="px-3 py-1.5 text-xs font-medium border bg-white rounded-md text-gray-600 hover:bg-gray-50">è½¬æ¥åŒäº‹</button>
                    <button className="px-3 py-1.5 text-xs font-medium bg-black text-white rounded-md shadow hover:bg-gray-800 transition flex items-center gap-2">
                        <span>æ¥ç®¡å¯¹è¯</span>
                    </button>
                </div>
            </div>

            {/* Chat Messages */}
            <div className="flex-1 overflow-y-auto p-6 space-y-6">
                {CHAT_HISTORY.map((msg, i) => (
                    msg.role === 'system' ? (
                        <div key={i} className="flex justify-center fade-in">
                            <div className="bg-yellow-50 border border-yellow-200 text-yellow-800 text-xs px-4 py-2 rounded-full flex items-center gap-2 shadow-sm">
                                {Icons.AlertTriangle}
                                {msg.content}
                            </div>
                        </div>
                    ) : (
                        <div key={i} className={`flex ${msg.role === 'user' ? 'justify-start' : 'justify-end'} fade-in`}>
                            {msg.role === 'user' && <div className="w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center text-xs text-gray-600 mr-3">User</div>}
                            <div className={`max-w-[60%] p-4 rounded-xl text-sm leading-relaxed shadow-sm ${
                                msg.role === 'user' ? 'bg-white border border-gray-200 text-gray-800 rounded-tl-none' : 'bg-blue-600 text-white rounded-tr-none'
                            }`}>
                                {msg.content}
                                {msg.role === 'ai' && <div className="text-[10px] text-blue-200 mt-2 flex items-center gap-1">{Icons.Zap} AI Confidence: 94%</div>}
                            </div>
                            {msg.role === 'ai' && <div className="w-8 h-8 bg-black rounded-full flex items-center justify-center text-white text-xs ml-3">AI</div>}
                        </div>
                    )
                ))}
            </div>

            {/* Copilot Input */}
            <div className="p-4 bg-white border-t">
                {/* AI Suggestion */}
                <div className="mb-3 flex gap-2 overflow-x-auto">
                    <button className="whitespace-nowrap text-xs bg-purple-50 text-purple-700 border border-purple-100 px-3 py-1.5 rounded-full hover:bg-purple-100 transition">
                        âœ¨ å»ºè®®å›å¤: åŒæ„é€€è´§å¹¶æä¾›å…é‚®æ ‡ç­¾
                    </button>
                    <button className="whitespace-nowrap text-xs bg-gray-50 text-gray-600 border border-gray-200 px-3 py-1.5 rounded-full hover:bg-gray-100 transition">
                        æŸ¥è¯¢åº“å­˜ (Lç )
                    </button>
                </div>
                <div className="relative">
                    <input className="w-full bg-gray-100 border-transparent focus:bg-white focus:border-gray-300 rounded-lg pl-4 pr-12 py-3 text-sm transition outline-none" placeholder="è¾“å…¥å›å¤å†…å®¹ï¼ŒAI å°†è¾…åŠ©ä¼˜åŒ–è¯­æ°”..." />
                    <button className="absolute right-2 top-2 p-1.5 bg-black text-white rounded-md hover:bg-gray-800 transition">
                        {Icons.Send}
                    </button>
                </div>
            </div>
        </div>
    );

    // 4. å³ä¾§è¯¦æƒ…æ  (Context Sidebar)
    const ContextSidebar = () => (
        <div className="w-[280px] bg-white border-l border-gray-200 p-4 hidden xl:block">
            <h4 className="text-xs font-bold text-gray-400 uppercase mb-4">ç”¨æˆ·ç”»åƒ</h4>
            
            {/* User Card */}
            <div className="bg-gray-50 rounded-xl p-4 mb-6 border border-gray-100">
                <div className="flex items-center gap-3 mb-3">
                    <div className="w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center">{Icons.User}</div>
                    <div>
                        <div className="font-bold text-sm">Mike Ross</div>
                        <div className="text-xs text-gray-500">ä¸Šæµ·, ä¸­å›½</div>
                    </div>
                </div>
                <div className="grid grid-cols-2 gap-2 text-center">
                    <div className="bg-white p-2 rounded-lg border border-gray-100">
                        <div className="text-xs text-gray-400">LTV</div>
                        <div className="font-bold text-sm">Â¥3,240</div>
                    </div>
                    <div className="bg-white p-2 rounded-lg border border-gray-100">
                        <div className="text-xs text-gray-400">é€€æ¬¾ç‡</div>
                        <div className="font-bold text-red-500 text-sm">15%</div>
                    </div>
                </div>
            </div>

            <h4 className="text-xs font-bold text-gray-400 uppercase mb-4">å½“å‰è®¢å•</h4>
            <div className="border border-gray-200 rounded-xl p-3">
                <div className="flex gap-3 mb-2">
                    <div className="w-12 h-12 bg-gray-100 rounded flex items-center justify-center text-xl">ğŸ§¥</div>
                    <div>
                        <div className="font-bold text-sm">é«˜çº§ç¾Šç»’å¤§è¡£</div>
                        <div className="text-xs text-gray-500">Â¥899 â€¢ é»‘è‰²/L</div>
                    </div>
                </div>
                <div className="bg-yellow-50 text-yellow-700 text-xs p-2 rounded border border-yellow-100 mb-2">
                    âš ï¸ æ­¤å•†å“å±äºé«˜å•ä»·é€€è´§é™åˆ¶å“ç±»
                </div>
                <button className="w-full py-1.5 border border-gray-300 rounded text-xs font-medium hover:bg-gray-50">æŸ¥çœ‹ Shopify è¯¦æƒ…</button>
            </div>
        </div>
    );

    // 5. å®¡æ‰¹ä¸­å¿ƒé¡µé¢ (Approvals Page)
    const ApprovalsPage = () => (
        <div className="flex-1 bg-gray-50 p-8 h-full overflow-y-auto fade-in">
            <div className="max-w-5xl mx-auto">
                <div className="flex justify-between items-end mb-8">
                    <div>
                        <h1 className="text-2xl font-bold text-gray-900">å¤§é¢é€€æ¬¾å®¡æ‰¹</h1>
                        <p className="text-sm text-gray-500 mt-1">è§„åˆ™: é‡‘é¢ > $50 (Â¥350) æˆ– é£é™©åˆ† > 80</p>
                    </div>
                    <div className="flex gap-3">
                        <div className="bg-white px-4 py-2 rounded-lg shadow-sm border text-sm">
                            <span className="text-gray-500 mr-2">å¾…å¤„ç†</span>
                            <span className="font-bold text-red-500">2</span>
                        </div>
                    </div>
                </div>

                <div className="bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden">
                    <table className="w-full text-left">
                        <thead className="bg-gray-50 border-b">
                            <tr>
                                <th className="p-4 text-xs font-medium text-gray-500 uppercase">ç”³è¯·ID</th>
                                <th className="p-4 text-xs font-medium text-gray-500 uppercase">ç”¨æˆ· / å•†å“</th>
                                <th className="p-4 text-xs font-medium text-gray-500 uppercase">é‡‘é¢</th>
                                <th className="p-4 text-xs font-medium text-gray-500 uppercase">é£é™©åˆ† (AI)</th>
                                <th className="p-4 text-xs font-medium text-gray-500 uppercase text-right">æ“ä½œ</th>
                            </tr>
                        </thead>
                        <tbody className="divide-y divide-gray-100">
                            {APPROVAL_TASKS.map(task => (
                                <tr key={task.id} className="hover:bg-gray-50 group">
                                    <td className="p-4 text-xs text-gray-500 font-mono">{task.id}</td>
                                    <td className="p-4">
                                        <div className="font-medium text-sm text-gray-900">{task.user}</div>
                                        <div className="text-xs text-gray-500">{task.item}</div>
                                    </td>
                                    <td className="p-4 font-bold text-sm">Â¥{task.amount}</td>
                                    <td className="p-4">
                                        <div className={`inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-bold ${task.riskScore > 80 ? 'bg-red-50 text-red-600' : 'bg-green-50 text-green-600'}`}>
                                            {task.riskScore > 80 ? Icons.AlertTriangle : Icons.CheckCircle}
                                            {task.riskScore} / 100
                                        </div>
                                    </td>
                                    <td className="p-4 text-right">
                                        <button className="text-gray-400 hover:text-gray-600 mr-3 text-sm font-medium">æŸ¥çœ‹è¯¦æƒ…</button>
                                        <button className="bg-black text-white text-xs px-3 py-1.5 rounded shadow hover:bg-gray-800 transition">
                                            æ‰¹å‡†é€€æ¬¾
                                        </button>
                                    </td>
                                </tr>
                            ))}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    );

    // ==========================================
    // ğŸš€ ä¸»å¸ƒå±€ (Layout)
    // ==========================================
    const App = () => {
        const [activeTab, setActiveTab] = useState('inbox'); // 'inbox' or 'approvals'

        return (
            <div className="flex h-full w-full bg-white">
                {/* 1. å·¦ä¾§å¯¼èˆªæ¡ */}
                <Sidebar activeTab={activeTab} onTabChange={setActiveTab} />

                {/* 2. ä¸»å†…å®¹åŒºåŸŸ (æ ¹æ® Tab åˆ‡æ¢) */}
                {activeTab === 'inbox' ? (
                    <>
                        <ChatList />
                        <ChatWindow />
                        <ContextSidebar />
                    </>
                ) : (
                    <ApprovalsPage />
                )}
            </div>
        );
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
</script>

</body>
</html>